{% extends "account/base.html" %}
{% load static %}

{% block title %}Planning{% endblock %}

{% block body_class %}page-planning{% endblock %}

{% block content %}
<div class="content-body">
	<div class="container-fluid">
		<!-- Breadcrumb and Page Title -->
		<div class="row">
			<div class="col-xl-12">
				<div class="page-titles">
					<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="{% url 'home' %}">Dashboard</a></li>
							<li class="breadcrumb-item active" aria-current="page">Plans</li>
						</ol>
					</nav>
				</div>
			</div>
		</div>

		<div class="plans-container">
			{% for category in categories %}
			<div class="plan-section">
				<h2 class="plan-section-title">{{ category.name }}</h2>
				<div class="plans-grid">
					{% for plan in category.plans.all %}
					<div class="plan-card">
						<div class="plan-tier">{{ plan.tier }}</div>
						<div class="plan-price">${{ plan.price|floatformat:2 }}</div>
						<ul class="plan-features">
							{% for feature in plan.get_features %}
							<li><i class="material-icons">check_circle</i> {{ feature }}</li>
							{% endfor %}
						</ul>
						<form action="" method="post">
							{% csrf_token %}
						
							{% if plan.has_currency_select %}
								<div>
									<select class="form-control my-2" name="plan" required>
										{% for i in currency_list %}
										<option value="{{ i.payment.ref }}_{{ plan.id }}">
											{{ i.payment.currency }} ({{ i.payment.abbr }})
										</option>
										{% endfor %}
									</select>
								</div>
						
								<div>
									<select class="form-control my-2" name="network" required>
										<option value="" disabled selected>--Select network--</option>
										<option value="erc20">ERC20 (Ethereum)</option>
										<option value="trc20">TRC20 (Tron)</option>
										<option value="bep20">BEP20 (BSC)</option>
									</select>
								</div>
						
							{% else %}
								<!-- NON-MINING PLANS -->
								<input type="hidden" name="plan" value="none_{{ plan.id }}">
							{% endif %}
						
							<button type="submit" class="plan-button">{{ plan.button_text }}</button>
						</form>						
					</div>
					{% endfor %}
				</div>
			</div>
			{% endfor %}
		</div>

	</div>
</div>
<!--**********************************
			Content body end
		***********************************-->
{% endblock %}