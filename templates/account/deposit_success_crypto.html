{%extends "account/base.html" %}
{% load static %}

{% block title %}Deposit Success Crypto | Norvia.io{% endblock %}

{% block body_class %}page-depositsuccess{% endblock %}

{% block content %}
<div class="content-body default-height">
    <div class="container-fluid">
        <div class="row">
        <div class="col-xl-12">
            <div class="row">
                <div class="col-xl-12">
                    <div class="page-titles">
                        <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                              <li class="breadcrumb-item"><a href="{% url 'home' %}">Dashboard</a></li>
                              <li class="breadcrumb-item"><a href="{% url 'deposit' %}">Deposit</a></li>
                              <li class="breadcrumb-item active" aria-current="page">Success</li>
                            </ol>
                          </nav>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="row justify-content-center">
                <div class="col-xl-8 col-lg-10">

                    <!-- Status Card -->
                    <div class="status-card">
                        <div class="status-icon-wrapper">
                            <i class="material-icons status-icon">check_circle</i>
                        </div>
                        <h3 class="status-title">Deposit Successful!</h3>
                        <p class="status-message">
                            Your deposit has been verified and successfully credited to your account. You can now start trading!
                        </p>
                        <div class="status-badge">
                            <i class="material-icons">verified</i>
                            Verified & Completed
                        </div>
                    </div>

                    <!-- Amount Display -->
                    <div class="amount-display-card">
                        <div class="amount-label">Amount Credited</div>
                        <div class="amount-value">${{deposit.approved_amount}}</div>
                        <div class="amount-description">Added to your Trading Wallet</div>
                    </div>

                    <!-- Transaction Details -->
                    <div class="transaction-details-card">
                        <h5>Transaction Details</h5>
                        <div class="detail-row">
                            <span class="detail-label">Transaction ID</span>
                            <span class="detail-value">#TXN{{deposit.transaction_no}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Amount</span>
                            <span class="detail-value">${{deposit.grand_total}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Currency</span>
                            <span class="detail-value">{{deposit.currency.currency|capfirst}} ({{deposit.currency.abbr|upper}})</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Network</span>
                            <span class="detail-value">{{deposit.currency.network}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Deposited To</span>
                            <span class="detail-value">Trading Wallet</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Network Fee</span>
                            <span class="detail-value">${{deposit.currency.transaction_fee}}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Status</span>
                            <span class="detail-value success">âœ“ Completed</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Completed At</span>
                            <span class="detail-value">{{deposit.approved_on|date:"M j, Y g:i A"}}</span>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <a href="{% url 'deposit' %}" class="btn btn-outline-primary">
                            <i class="material-icons">add_circle</i>
                            Make Another Deposit
                        </a>
                        <a href="{% url 'home' %}" class="btn btn-primary">
                            <i class="material-icons">home</i>
                            Back to Dashboard
                        </a>
                    </div>

                </div>
            </div>

            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script>
    // Django backend handled:
    // - Verified blockchain transaction
    // - Counted required confirmations
    // - Updated transaction status to "Completed"
    // - Credited user's trading wallet with $100.00
    // - Sent email/push notification to user
    // - Logged transaction in history
    // - Redirected user to this success page
</script>
{% endblock %}

