{% extends 'manager/base.html' %}
{% load static %}
{% block content %}
<div class="content-body">
    <div class="container-fluid">

        <!-- Breadcrumb -->
        <div class="row">
            <div class="col-xl-12">
                <div class="page-titles">
                    <nav style="--bs-breadcrumb-divider: '>';">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{% url 'admin_home' %}">Dashboard</a></li>
                            <li class="breadcrumb-item active">Verification Settings</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <i class="material-icons" style="font-size: 32px;">verified_user</i>
            <div>
                <h2>Verification Settings</h2>
                <p>Configure verification requirements for user accounts</p>
            </div>
        </div>

        <!-- Statistics Row -->
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-icon success">
                    <i class="material-icons">verified</i>
                </div>
                <div class="stat-details">
                    <h4>{{kyc_verified}}</h4>
                    <p>KYC Verified Users</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon warning">
                    <i class="material-icons">pending</i>
                </div>
                <div class="stat-details">
                    <h4>{{kyc_pending}}</h4>
                    <p>Pending Verifications</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon info">
                    <i class="material-icons">home</i>
                </div>
                <div class="stat-details">
                    <h4>{{address_verified}}</h4>
                    <p>Address Verified</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon danger">
                    <i class="material-icons">cancel</i>
                </div>
                <div class="stat-details">
                    <h4>{{address_pending}}</h4>
                    <p>Rejected</p>
                </div>
            </div>
        </div>

        <form method="POST" action="">
            {% csrf_token %}
        
            <!-- KYC Verification Settings -->
            <div class="settings-section">
                <div class="section-header">
                    <div class="section-icon-header">
                        <i class="material-icons">badge</i>
                    </div>
                    <div class="section-title">
                        <h3>KYC Verification</h3>
                        <p>Configure identity verification settings</p>
                    </div>
                </div>
        
                <!-- Enable KYC Verification -->
                <div class="setting-item">
                    <div class="setting-label">
                        <h4>Enable KYC Verification</h4>
                        <p>Require users to verify their identity</p>
                    </div>
                    <label class="toggle-switch">
                        <input
                            type="checkbox"
                            name="kyc_verification"
                            {% if config.kyc_verification %}checked{% endif %}
                        >
                        <span class="toggle-slider"></span>
                    </label>
                </div>
        
                <!-- Requirement Level -->
                <div class="setting-item">
                    <div class="setting-label">
                        <h4>Requirement Level</h4>
                        <p>When users must complete KYC verification</p>
                    </div>
                    <select name="required_level_for_kyc" class="setting-select" style="max-width: 300px;">
                        <option value="optional"          {% if config.required_level_for_kyc == "optional" %}selected{% endif %}>Optional</option>
                        <option value="before_deposit"    {% if config.required_level_for_kyc == "before_deposit" %}selected{% endif %}>Before First Deposit</option>
                        <option value="before_withdrawal" {% if config.required_level_for_kyc == "before_withdrawal" %}selected{% endif %}>Before First Withdrawal</option>
                        <option value="mandatory"         {% if config.required_level_for_kyc == "mandatory" %}selected{% endif %}>Mandatory (Upon Registration)</option>
                    </select>
                </div>
        
                <!-- Transaction Limits -->
                <div class="setting-item">
                    <div class="setting-label">
                        <h4>Transaction Limits (Unverified Users)</h4>
                        <p>Maximum deposit and withdrawal for users without KYC</p>
                    </div>
        
                    <div class="setting-input-group">
                        <div>
                            <label class="form-label">Min Transaction Amount</label>
                            <input
                                type="number"
                                name="transaction_limit_for_unverified_user_minimum"
                                class="setting-input"
                                value="{{ config.transaction_limit_for_unverified_user_minimum }}"
                            >
                        </div>
        
                        <div>
                            <label class="form-label">Max Transaction Amount</label>
                            <input
                                type="number"
                                name="transaction_limit_for_unverified_user_maximum"
                                class="setting-input"
                                value="{{ config.transaction_limit_for_unverified_user_maximum }}"
                            >
                        </div>
                    </div>
                </div>
            </div>
        
            <!-- Email Verification Settings -->
            <div class="settings-section">
                <div class="section-header">
                    <div class="section-icon-header">
                        <i class="material-icons">email</i>
                    </div>
                    <div class="section-title">
                        <h3>Email Verification</h3>
                        <p>Configure email verification requirements</p>
                    </div>
                </div>
        
                <!-- Enable Email Verification -->
                <div class="setting-item">
                    <div class="setting-label">
                        <h4>Enable Email Verification</h4>
                        <p>Require users to verify their email address</p>
                    </div>
                    <label class="toggle-switch">
                        <input
                            type="checkbox"
                            name="email_verification_enable"
                            {% if config.email_verification_enable %}checked{% endif %}
                        >
                        <span class="toggle-slider"></span>
                    </label>
                </div>
        
                <!-- Maximum Resend Attempts -->
                <div class="setting-item">
                    <div class="setting-label">
                        <h4>Resend Limit</h4>
                        <p>Maximum verification email resend attempts</p>
                    </div>
                    <input
                        type="number"
                        name="maximum_verification_email_resend_attempts"
                        class="setting-input"
                        style="max-width: 150px;"
                        value="{{ config.maximum_verification_email_resend_attempts }}"
                    >
                </div>
            </div>
        
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button type="reset" class="btn-reset">Reset to Defaults</button>
                <button type="submit" class="btn-save">
                    <i class="material-icons">save</i>
                    Save Settings
                </button>
            </div>
        
        </form>        

    </div>
</div>
{% endblock %}