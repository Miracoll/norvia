{% extends 'manager/base.html' %}
{% load static %}
{% block content %}
<div class="content-body">
    <div class="container-fluid">

        <!-- Breadcrumb -->
        <div class="row">
            <div class="col-xl-12">
                <div class="page-titles">
                    <nav style="--bs-breadcrumb-divider: '>';">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="admin-dashboard.html">Dashboard</a></li>
                            <li class="breadcrumb-item active">User Account Settings</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">User Account Settings</h1>
        </div>

        <!-- Settings Tabs -->
        <div class="settings-tabs">
            <button class="tab-btn active" onclick="switchTab('general')">General</button>
            <button class="tab-btn" onclick="switchTab('accounts')">Account Defaults</button>
            <button class="tab-btn" onclick="switchTab('leverage')">Leverage & Tiers</button>
            <button class="tab-btn" onclick="switchTab('timeframes')">Trade Timeframes</button>
            <button class="tab-btn" onclick="switchTab('security')">Security</button>
        </div>

        <!-- Tab Content: General -->
        <div id="general-tab" class="tab-content active">
            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">settings</i>
                        General Settings
                    </h3>
                </div>
                <p class="card-description">Configure basic platform settings and preferences.</p>

                <div class="form-group">
                    <label class="form-label">Platform Name</label>
                    <input type="text" class="form-input" value="Norvia.io" />
                </div>

                <div class="form-group">
                    <label class="form-label">Minimum Deposit Amount (USD)</label>
                    <input type="number" class="form-input" value="10.00" step="0.01" />
                    <div class="form-help">Minimum amount users can deposit</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Minimum Withdrawal Amount (USD)</label>
                    <input type="number" class="form-input" value="50.00" step="0.01" />
                    <div class="form-help">Minimum amount users can withdraw</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Platform Status</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Platform Active</span>
                    </div>
                    <div class="form-help">Disable to put platform in maintenance mode</div>
                </div>

                <div class="form-group">
                    <label class="form-label">New User Registration</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Allow New Registrations</span>
                    </div>
                </div>

                <button class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Changes
                </button>
            </div>
        </div>

        <!-- Tab Content: Account Defaults & Restrictions -->
        <div id="accounts-tab" class="tab-content">
            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">person_add</i>
                        New User Defaults
                    </h3>
                </div>
                <p class="card-description">Configure default settings applied to all new user accounts.</p>

                <div class="form-group">
                    <label class="form-label">Default Account Tier</label>
                    <select class="form-select">
                        <option value="1" selected>Tier 1 - New User</option>
                        <option value="2">Tier 2 - Verified User</option>
                        <option value="3">Tier 3 - Premium User</option>
                    </select>
                    <div class="form-help">Initial tier assigned to new users</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Default Language</label>
                    <select class="form-select">
                        <option value="en" selected>English</option>
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="zh">Chinese</option>
                        <option value="ja">Japanese</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Default Currency Display</label>
                    <select class="form-select">
                        <option value="usd" selected>USD ($)</option>
                        <option value="eur">EUR (€)</option>
                        <option value="gbp">GBP (£)</option>
                        <option value="btc">BTC (₿)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Default Notification Preferences</label>
                    <div class="toggle-switch" style="margin-bottom: 8px;">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Email Notifications (Enabled by default)</span>
                    </div>
                    <div class="toggle-switch" style="margin-bottom: 8px;">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Push Notifications (Enabled by default)</span>
                    </div>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <span>SMS Notifications (Disabled by default)</span>
                    </div>
                </div>

                <button class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Defaults
                </button>
            </div>

            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">lock</i>
                        2FA & Security Requirements
                    </h3>
                </div>
                <p class="card-description">Configure two-factor authentication and security requirements.</p>

                <div class="form-group">
                    <label class="form-label">Require 2FA for All Users</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" id="require2fa">
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Mandatory 2FA</span>
                    </div>
                    <div class="form-help">Force all users to enable 2FA before trading</div>
                </div>

                <div class="form-group">
                    <label class="form-label">2FA Methods Allowed</label>
                    <div class="toggle-switch" style="margin-bottom: 8px;">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Google Authenticator / TOTP</span>
                    </div>
                    <div class="toggle-switch" style="margin-bottom: 8px;">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>SMS OTP</span>
                    </div>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Email OTP</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Require Security Questions</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Enabled</span>
                    </div>
                    <div class="form-help">Users must set security questions for account recovery</div>
                </div>

                <button class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Security Requirements
                </button>
            </div>

            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">vpn_key</i>
                        Password Policies
                    </h3>
                </div>
                <p class="card-description">Configure password requirements and policies.</p>

                <div class="form-group">
                    <label class="form-label">Minimum Password Length</label>
                    <input type="number" class="form-input" value="8" min="6" max="32" />
                    <div class="form-help">Minimum characters required for passwords</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Password Requirements</label>
                    <div class="toggle-switch" style="margin-bottom: 8px;">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Require Uppercase Letter</span>
                    </div>
                    <div class="toggle-switch" style="margin-bottom: 8px;">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Require Lowercase Letter</span>
                    </div>
                    <div class="toggle-switch" style="margin-bottom: 8px;">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Require Number</span>
                    </div>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Require Special Character</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Password Expiry Period (Days)</label>
                    <input type="number" class="form-input" value="90" placeholder="0 = Never expires" />
                    <div class="form-help">Force password change after X days (0 to disable)</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Failed Login Attempts Before Lockout</label>
                    <input type="number" class="form-input" value="5" min="3" max="10" />
                    <div class="form-help">Number of failed attempts before temporary lockout</div>
                </div>

                <button class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Password Policies
                </button>
            </div>

            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">schedule</i>
                        Session & Activity Settings
                    </h3>
                </div>
                <p class="card-description">Configure user session and activity management.</p>

                <div class="form-group">
                    <label class="form-label">Maximum Active Sessions Per User</label>
                    <input type="number" class="form-input" value="3" min="1" max="10" />
                    <div class="form-help">Max concurrent logins allowed per account</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Inactive Account Auto-Suspension (Days)</label>
                    <input type="number" class="form-input" value="365" placeholder="0 = Disable" />
                    <div class="form-help">Suspend accounts inactive for X days (0 to disable)</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Require Login Notifications</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Enabled</span>
                    </div>
                    <div class="form-help">Send email/SMS alerts on new device logins</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Require Withdrawal Whitelist</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Optional</span>
                    </div>
                    <div class="form-help">Users can only withdraw to whitelisted addresses</div>
                </div>

                <button class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Session Settings
                </button>
            </div>

            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">block</i>
                        Account Restrictions & Features
                    </h3>
                </div>
                <p class="card-description">Control which features users can access and customize.</p>

                <div class="form-group">
                    <label class="form-label">Allow Users to Customize Notifications</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Enabled</span>
                    </div>
                    <div class="form-help">Users can change their notification preferences</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Allow Auto-Copy Trading</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Enabled Platform-Wide</span>
                    </div>
                    <div class="form-help">Enable copy trading feature for all users</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Allow Account Self-Deletion</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Enabled</span>
                    </div>
                    <div class="form-help">Users can request account deletion from settings</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Require Stop-Loss Protection</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Optional</span>
                    </div>
                    <div class="form-help">Force users to set stop-loss on all trades</div>
                </div>

                <button class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Feature Settings
                </button>
            </div>

            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">star</i>
                        Trader Application Requirements
                    </h3>
                </div>
                <p class="card-description">Set eligibility criteria for users who want to become copy trading leaders.</p>

                <div class="form-group">
                    <label class="form-label">Enable Trader Applications</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" id="enableTraderApplications" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Enabled</span>
                    </div>
                    <div class="form-help">Allow users to apply to become copy trading leaders</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Minimum Trading Balance Required (USD)</label>
                    <input type="number" class="form-input" id="minTraderBalance" value="20000" step="1000" />
                    <div class="form-help">Minimum balance in trading wallet required to apply as a trader</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Minimum Account Age (Days)</label>
                    <input type="number" class="form-input" id="minAccountAge" value="30" min="0" />
                    <div class="form-help">Account must be at least this old to apply (0 = no restriction)</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Required KYC Verification Level</label>
                    <select class="form-select" id="requiredKycLevel">
                        <option value="0">No Verification Required</option>
                        <option value="1">Level 1 - Email Verified</option>
                        <option value="2" selected>Level 2 - ID Verified</option>
                        <option value="3">Level 3 - Fully Verified</option>
                    </select>
                    <div class="form-help">Minimum KYC level required to apply as a trader</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Minimum Trading Volume (Last 30 Days, USD)</label>
                    <input type="number" class="form-input" id="minTradingVolume" value="50000" step="5000" />
                    <div class="form-help">Minimum trading volume required in the last 30 days</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Require Minimum Win Rate (%)</label>
                    <input type="number" class="form-input" id="minWinRate" value="55" min="0" max="100" />
                    <div class="form-help">Minimum win rate percentage required (0 = no restriction)</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Auto-Approve Applications</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" id="autoApproveTraders">
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Manual Review Required</span>
                    </div>
                    <div class="form-help">Automatically approve applications that meet all requirements</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Application Review Period (Days)</label>
                    <input type="number" class="form-input" id="reviewPeriod" value="5" min="1" max="30" />
                    <div class="form-help">Maximum days to review and respond to applications</div>
                </div>

                <button class="btn-save" onclick="saveTraderRequirements()">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Trader Requirements
                </button>
            </div>
        </div>

        <!-- Tab Content: Leverage & Tiers -->
        <div id="leverage-tab" class="tab-content">
            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">leaderboard</i>
                        User Tier System
                    </h3>
                </div>
                <p class="card-description">Configure leverage limits for each user tier.</p>

                <table class="leverage-table">
                    <thead>
                        <tr>
                            <th>Tier</th>
                            <th>Name</th>
                            <th>Max Leverage</th>
                            <th>Requirements</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="tier-badge tier-1">Tier 1</span></td>
                            <td><strong>New User</strong></td>
                            <td>
                                <input type="number" class="form-input" value="50" style="width: 100px; height: 36px;" />
                                <span style="margin-left: 4px;">X</span>
                            </td>
                            <td>Default tier for all new users</td>
                            <td>
                                <button class="btn-save" style="padding: 8px 16px; font-size: 12px;">
                                    <i class="material-icons" style="font-size: 14px;">save</i>
                                    Save
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="tier-badge tier-2">Tier 2</span></td>
                            <td><strong>Verified User</strong></td>
                            <td>
                                <input type="number" class="form-input" value="200" style="width: 100px; height: 36px;" />
                                <span style="margin-left: 4px;">X</span>
                            </td>
                            <td>KYC Level 2 completed</td>
                            <td>
                                <button class="btn-save" style="padding: 8px 16px; font-size: 12px;">
                                    <i class="material-icons" style="font-size: 14px;">save</i>
                                    Save
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="tier-badge tier-3">Tier 3</span></td>
                            <td><strong>Premium User</strong></td>
                            <td>
                                <input type="number" class="form-input" value="500" style="width: 100px; height: 36px;" />
                                <span style="margin-left: 4px;">X</span>
                            </td>
                            <td>KYC Level 3 + Premium subscription</td>
                            <td>
                                <button class="btn-save" style="padding: 8px 16px; font-size: 12px;">
                                    <i class="material-icons" style="font-size: 14px;">save</i>
                                    Save
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">trending_up</i>
                        Available Leverage Options
                    </h3>
                </div>
                <p class="card-description">Manage available leverage multipliers for trading.</p>

                <div class="fee-grid">
                    <div class="form-group">
                        <label class="form-label">10X Leverage</label>
                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Enabled (Tier 1+)</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">25X Leverage</label>
                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Enabled (Tier 1+)</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">50X Leverage</label>
                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Enabled (Tier 1+)</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">100X Leverage</label>
                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Enabled (Tier 2+)</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">200X Leverage</label>
                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Enabled (Tier 2+)</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">500X Leverage</label>
                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Enabled (Tier 3)</span>
                        </div>
                    </div>
                </div>

                <button class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Leverage Options
                </button>
            </div>
        </div>

        <!-- Tab Content: Timeframes -->
        <div id="timeframes-tab" class="tab-content">
            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">schedule</i>
                        Trade Timeframe Control
                    </h3>
                </div>
                <p class="card-description">Enable or disable specific trade durations for live trading.</p>

                <div class="timeframe-grid">
                    <div class="timeframe-item">
                        <div class="form-group" style="margin-bottom: 12px;">
                            <label class="form-label">3 Seconds</label>
                            <div class="toggle-switch">
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                                <span style="font-size: 12px;">High Risk</span>
                            </div>
                        </div>
                        <select class="form-select" style="height: 36px;">
                            <option>Tier 1+</option>
                            <option selected>Tier 2+</option>
                            <option>Tier 3 Only</option>
                        </select>
                    </div>

                    <div class="timeframe-item active">
                        <div class="form-group" style="margin-bottom: 12px;">
                            <label class="form-label">1 Minute</label>
                            <div class="toggle-switch">
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                                <span style="font-size: 12px;">Enabled</span>
                            </div>
                        </div>
                        <select class="form-select" style="height: 36px;">
                            <option selected>Tier 1+</option>
                            <option>Tier 2+</option>
                            <option>Tier 3 Only</option>
                        </select>
                    </div>

                    <div class="timeframe-item active">
                        <div class="form-group" style="margin-bottom: 12px;">
                            <label class="form-label">5 Minutes</label>
                            <div class="toggle-switch">
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                                <span style="font-size: 12px;">Enabled</span>
                            </div>
                        </div>
                        <select class="form-select" style="height: 36px;">
                            <option selected>Tier 1+</option>
                            <option>Tier 2+</option>
                            <option>Tier 3 Only</option>
                        </select>
                    </div>

                    <div class="timeframe-item active">
                        <div class="form-group" style="margin-bottom: 12px;">
                            <label class="form-label">15 Minutes</label>
                            <div class="toggle-switch">
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                                <span style="font-size: 12px;">Enabled</span>
                            </div>
                        </div>
                        <select class="form-select" style="height: 36px;">
                            <option selected>Tier 1+</option>
                            <option>Tier 2+</option>
                            <option>Tier 3 Only</option>
                        </select>
                    </div>

                    <div class="timeframe-item active">
                        <div class="form-group" style="margin-bottom: 12px;">
                            <label class="form-label">30 Minutes</label>
                            <div class="toggle-switch">
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                                <span style="font-size: 12px;">Enabled</span>
                            </div>
                        </div>
                        <select class="form-select" style="height: 36px;">
                            <option selected>Tier 1+</option>
                            <option>Tier 2+</option>
                            <option>Tier 3 Only</option>
                        </select>
                    </div>
                </div>

                <button class="btn-save" style="margin-top: 24px;">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Timeframe Settings
                </button>
            </div>
        </div>

        <!-- Tab Content: Security -->
        <div id="security-tab" class="tab-content">
            <div class="settings-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="material-icons">security</i>
                        Security Settings
                    </h3>
                </div>
                <p class="card-description">Configure security and compliance settings.</p>

                <div class="form-group">
                    <label class="form-label">Require 2FA for Withdrawals</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Enabled</span>
                    </div>
                    <div class="form-help">Users must enable 2FA to make withdrawals</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Require Email Verification</label>
                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                        <span style="font-weight: 600;">Enabled</span>
                    </div>
                    <div class="form-help">Users must verify email before trading</div>
                </div>

                <div class="form-group">
                    <label class="form-label">IP Whitelist for Admin Access</label>
                    <textarea class="form-input" rows="4" placeholder="Enter IPs (one per line)&#10;192.168.1.1&#10;203.45.67.89" style="height: auto; padding: 12px; resize: vertical;"></textarea>
                    <div class="form-help">Leave blank to allow from any IP</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Session Timeout (minutes)</label>
                    <input type="number" class="form-input" value="30" />
                    <div class="form-help">Auto logout after inactivity</div>
                </div>

                <button class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Security Settings
                </button>
            </div>
        </div>

    </div>
</div>
{% endblock content %}

{% block extra_scripts %}
<script>
    function switchTab(tabName) {
        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.remove('active');
        });

        // Remove active from all buttons
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
        });

        // Show selected tab
        document.getElementById(tabName + '-tab').classList.add('active');

        // Add active to clicked button
        event.target.classList.add('active');
    }

    // Mobile Sidebar Toggle
    (function() {
        let overlay = document.querySelector('.sidebar-overlay');
        if (!overlay) {
            overlay = document.createElement('div');
            overlay.className = 'sidebar-overlay';
            document.body.appendChild(overlay);
        }

        const hamburger = document.querySelector('.hamburger');
        const sidebar = document.querySelector('.dlabnav');

        if (hamburger && sidebar) {
            hamburger.addEventListener('click', function(e) {
                e.stopPropagation();
                hamburger.classList.toggle('is-active');
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
                document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : '';
            });

            overlay.addEventListener('click', function() {
                hamburger.classList.remove('is-active');
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            });

            sidebar.querySelectorAll('a').forEach(function(link) {
                link.addEventListener('click', function() {
                    if (window.innerWidth < 768) {
                        setTimeout(function() {
                            hamburger.classList.remove('is-active');
                            sidebar.classList.remove('active');
                            overlay.classList.remove('active');
                            document.body.style.overflow = '';
                        }, 300);
                    }
                });
            });

            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    hamburger.classList.remove('is-active');
                    sidebar.classList.remove('active');
                    overlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        }
    })();

    // Save Trader Requirements
    function saveTraderRequirements() {
        const requirements = {
            enabled: document.getElementById('enableTraderApplications').checked,
            minBalance: document.getElementById('minTraderBalance').value,
            minAccountAge: document.getElementById('minAccountAge').value,
            requiredKycLevel: document.getElementById('requiredKycLevel').value,
            minTradingVolume: document.getElementById('minTradingVolume').value,
            minWinRate: document.getElementById('minWinRate').value,
            autoApprove: document.getElementById('autoApproveTraders').checked,
            reviewPeriod: document.getElementById('reviewPeriod').value
        };

        console.log('Saving trader requirements:', requirements);
        alert('Trader application requirements saved successfully!');

        // In production: fetch('/admin/api/save-trader-requirements', {...});
    }

</script>
{% endblock extra_scripts %}