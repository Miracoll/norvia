{% extends 'manager/base.html' %}
{% load static %}
{% block content %}
<div class="content-body">
    <div class="container-fluid">

        <!-- Breadcrumb -->
        <div class="row">
            <div class="col-xl-12">
                <div class="page-titles">
                    <nav style="--bs-breadcrumb-divider: '>';">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="admin-dashboard.html">Dashboard</a></li>
                            <li class="breadcrumb-item"><a href="traders-list.html">Traders</a></li>
                            <li class="breadcrumb-item active">Add New Trader</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>

        <!-- Form Container -->
        <form method="POST" action="" enctype="multipart/form-data" class="form-container">
            {% csrf_token %}
            <input type="hidden" name="action" value="add_trader">

            <!-- Section 1: Basic Information -->
            <div class="form-card">
                <h3 class="section-title">
                    <i class="material-icons">person</i>
                    Basic Information
                </h3>
                <p class="section-description">Enter basic details about the trader.</p>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Trader Name <span class="required">*</span></label>
                        <input type="text" name="trader_name" class="form-input" placeholder="e.g., John Crypto" required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">Username <span class="required">*</span></label>
                        <input type="text" name="username" class="form-input" placeholder="e.g., johncrypto" required />
                        <div class="form-help">No spaces, lowercase letters and numbers only</div>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label class="form-label">Profile Photo <span class="required">*</span></label>
                    <label class="file-upload" for="photo-upload">
                        <i class="material-icons upload-icon">cloud_upload</i>
                        <div class="upload-text">Click to upload profile photo</div>
                        <div class="upload-hint">PNG, JPG or GIF (max. 5MB)</div>
                        <input type="file" name="profile_photo" id="photo-upload" accept="image/*" required />
                    </label>
                </div>

                <div class="form-group full-width">
                    <label class="form-label">Verification Badge</label>
                    <div class="form-help" style="margin-bottom: 12px;">Select the verification badge type for this trader</div>
                    <div class="badge-selector">
                        <label class="badge-wrapper">
                            <input type="radio" name="badge" value="blue" checked class="badge-input" />
                            <div class="badge-display badge-blue">
                                <i class="material-icons badge-icon">verified</i>
                                <span class="badge-label-text">Blue Badge</span>
                                <span class="badge-description">Standard verified</span>
                            </div>
                        </label>
                        <label class="badge-wrapper">
                            <input type="radio" name="badge" value="gold" class="badge-input" />
                            <div class="badge-display badge-gold">
                                <i class="material-icons badge-icon">workspace_premium</i>
                                <span class="badge-label-text">Gold Badge</span>
                                <span class="badge-description">Premium verified</span>
                            </div>
                        </label>
                        <label class="badge-wrapper">
                            <input type="radio" name="badge" value="none" class="badge-input" />
                            <div class="badge-display badge-none">
                                <i class="material-icons badge-icon">remove_circle_outline</i>
                                <span class="badge-label-text">No Badge</span>
                                <span class="badge-description">Unverified</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Section 2: Trading Statistics -->
            <div class="form-card">
                <h3 class="section-title">
                    <i class="material-icons">analytics</i>
                    Trading Statistics
                </h3>
                <p class="section-description">Enter the trader's performance metrics.</p>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Total Wins <span class="required">*</span></label>
                        <input type="number" name="total_wins" class="form-input" placeholder="e.g., 7847" min="0" required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">Total Losses <span class="required">*</span></label>
                        <input type="number" name="total_losses" class="form-input" placeholder="e.g., 290" min="0" required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">Win Rate (%) <span class="required">*</span></label>
                        <input type="number" name="win_rate" class="form-input" placeholder="e.g., 96.50" min="0" max="100" step="0.01" required />
                        <div class="form-help">Enter as percentage (e.g., 96.5 for 96.5%)</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Profit Share (%) <span class="required">*</span></label>
                        <input type="number" name="profit_share" class="form-input" placeholder="e.g., 20.00" min="0" max="100" step="0.01" required />
                        <div class="form-help">Percentage trader takes from user profits</div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Copy Trading Configuration -->
            <div class="form-card">
                <h3 class="section-title">
                    <i class="material-icons">content_copy</i>
                    Copy Trading Configuration
                </h3>
                <p class="section-description">Configure how users can copy this trader.</p>

                <div class="form-group">
                    <label class="form-label">Copy Mode <span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-wrapper">
                            <input type="radio" name="copy_mode" value="flexible" checked class="radio-input" />
                            <div class="radio-display">
                                <div class="radio-content">
                                    <span class="radio-label">Flexible Percentage</span>
                                    <span class="radio-description">Users can select any percentage (1-100%) of their balance to allocate. Provides more flexibility.</span>
                                </div>
                            </div>
                        </label>

                        <label class="radio-wrapper">
                            <input type="radio" name="copy_mode" value="full" class="radio-input" />
                            <div class="radio-display">
                                <div class="radio-content">
                                    <span class="radio-label">Full Balance Only (100%)</span>
                                    <span class="radio-description">Users must allocate their entire trading balance. No percentage slider shown - fixed at 100%.</span>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Minimum Balance Required (USD) <span class="required">*</span></label>
                    <input type="number" name="min_balance" class="form-input" placeholder="e.g., 1000.00" min="0" step="0.01" value="100.00" required />
                    <div class="form-help">Minimum amount a user must have in their trading account to copy this trader</div>
                </div>

                <div class="form-group">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" name="require_approval" id="require_approval" value="1" />
                        <label class="checkbox-label" for="require_approval">
                            Require trader approval before users can start copying
                        </label>
                    </div>
                    <div class="form-help" style="margin-left: 44px; margin-top: 8px;">
                        If enabled, users must send a "Request to Copy" and wait for approval. If disabled, users can start copying immediately.
                    </div>
                </div>
            </div>

            <!-- Section 4: About Trader -->
            <div class="form-card">
                <h3 class="section-title">
                    <i class="material-icons">info</i>
                    About This Trader
                </h3>
                <p class="section-description">Add detailed information about the trader's strategies, hours, and approach. These will be displayed on the trader's profile page.</p>

                <div class="form-group">
                    <label class="form-label">Bio / Description</label>
                    <textarea name="bio" class="form-textarea" placeholder="e.g., Professional cryptocurrency trader with over 5 years of experience..." style="min-height: 100px;"></textarea>
                    <div class="form-help">Short introduction about the trader (2-3 sentences)</div>
                </div>

                <div class="form-group">
                    <label class="form-label">About Items (Optional)</label>
                    <div class="form-help" style="margin-bottom: 16px;">You can add additional information sections via Django admin panel after creating the trader</div>
                </div>
            </div>

            <!-- Section 5: Status -->
            <div class="form-card">
                <h3 class="section-title">
                    <i class="material-icons">toggle_on</i>
                    Status
                </h3>
                <p class="section-description">Control trader visibility and status.</p>

                <div class="form-group">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" name="is_active" id="is_active" value="1" checked />
                        <label class="checkbox-label" for="is_active">
                            Trader is active and visible to users
                        </label>
                    </div>
                    <div class="form-help" style="margin-left: 44px; margin-top: 8px;">
                        Uncheck to hide this trader from users
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <a href="{% url 'admin_trader_list' %}" class="btn-cancel">
                    Cancel
                </a>
                <button type="submit" class="btn-save">
                    <i class="material-icons" style="font-size: 18px;">save</i>
                    Save Trader
                </button>
            </div>

        </form>

    </div>
</div>
{% endblock %}