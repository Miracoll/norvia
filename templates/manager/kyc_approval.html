{% extends 'manager/base.html' %}
{% load static %}
{% block content %}
<div class="content-body">
    <div class="container-fluid">

        <!-- Breadcrumb -->
        <div class="row">
            <div class="col-xl-12">
                <div class="page-titles">
                    <nav style="--bs-breadcrumb-divider: '>';">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="admin-dashboard.html">Dashboard</a></li>
                            <li class="breadcrumb-item active">KYC Approvals</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">Pending KYC Verifications (8)</h1>
        </div>

        <!-- Stats Mini Cards -->
        <div class="stats-row">
            <div class="stat-mini">
                <div class="stat-mini-label">Pending Review</div>
                <div class="stat-mini-value" style="color: #f59e0b;">8</div>
            </div>
            <div class="stat-mini">
                <div class="stat-mini-label">Approved Today</div>
                <div class="stat-mini-value" style="color: #10b981;">15</div>
            </div>
            <div class="stat-mini">
                <div class="stat-mini-label">Rejected Today</div>
                <div class="stat-mini-value" style="color: #ef4444;">2</div>
            </div>
            <div class="stat-mini">
                <div class="stat-mini-label">Total Verified Users</div>
                <div class="stat-mini-value">1,847</div>
            </div>
        </div>

        <!-- KYC Cards Grid -->
        <div class="kyc-grid">

            <!-- KYC Card 1 -->
            <div class="kyc-card">
                <div class="kyc-header">
                    <div class="user-info">
                        <div class="user-avatar">JD</div>
                        <div class="user-details">
                            <h4>John Doe</h4>
                            <p>#USR-10245 • john@example.com</p>
                        </div>
                    </div>
                    <div class="kyc-level">
                        <i class="material-icons" style="font-size: 14px;">verified_user</i>
                        KYC Level 3
                    </div>
                </div>

                <div class="submitted-date">
                    <i class="material-icons" style="font-size: 14px;">schedule</i>
                    Submitted 2 hours ago
                </div>

                <!-- Personal Information -->
                <div class="section-divider">
                    <div class="section-title">
                        <i class="material-icons" style="font-size: 16px;">person</i>
                        Personal Information
                    </div>
                    <div class="doc-info">
                        <div class="info-item">
                            <div class="info-label">First Name</div>
                            <div class="info-value">John</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Last Name</div>
                            <div class="info-value">Doe</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Date of Birth</div>
                            <div class="info-value">Mar 15, 1990</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Nationality</div>
                            <div class="info-value">United States</div>
                        </div>
                    </div>
                </div>

                <!-- Residential Address -->
                <div class="section-divider">
                    <div class="section-title">
                        <i class="material-icons" style="font-size: 16px;">location_on</i>
                        Residential Address
                    </div>
                    <div class="doc-info">
                        <div class="info-item full-width">
                            <div class="info-label">Full Address</div>
                            <div class="info-value">123 Main Street, Apt 4B</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">City</div>
                            <div class="info-value">New York</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">State/Province</div>
                            <div class="info-value">New York</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Postal Code</div>
                            <div class="info-value">10001</div>
                        </div>
                    </div>
                </div>

                <!-- ID Document Type -->
                <div class="id-type-banner">
                    <span class="id-type-banner-label">ID Document Type:</span>
                    <span class="id-type-banner-value">Driver's License</span>
                </div>

                <!-- ID Documents -->
                <div class="doc-section">
                    <div class="doc-label">Government ID (Front)</div>
                    <div class="doc-preview" onclick="viewDocument('id-front-1.jpg')">
                        <i class="material-icons" style="font-size: 48px; color: #6b7280;">image</i>
                    </div>
                </div>

                <div class="doc-section">
                    <div class="doc-label">Government ID (Back)</div>
                    <div class="doc-preview" onclick="viewDocument('id-back-1.jpg')">
                        <i class="material-icons" style="font-size: 48px; color: #6b7280;">image</i>
                    </div>
                </div>

                <div class="doc-section">
                    <div class="doc-label">Selfie with ID</div>
                    <div class="doc-preview" onclick="viewDocument('selfie-1.jpg')">
                        <i class="material-icons" style="font-size: 48px; color: #6b7280;">portrait</i>
                    </div>
                </div>

                <div class="kyc-actions">
                    <button class="btn-approve" onclick="approveKYC('John Doe', 'USR-10245')">
                        <i class="material-icons" style="font-size: 18px;">check_circle</i>
                        Approve
                    </button>
                    <button class="btn-reject" onclick="rejectKYC('John Doe', 'USR-10245')">
                        <i class="material-icons" style="font-size: 18px;">cancel</i>
                        Reject
                    </button>
                </div>
            </div>

            <!-- KYC Card 2 -->
            <div class="kyc-card">
                <div class="kyc-header">
                    <div class="user-info">
                        <div class="user-avatar">SA</div>
                        <div class="user-details">
                            <h4>Sarah Anderson</h4>
                            <p>#USR-10244 • sarah@example.com</p>
                        </div>
                    </div>
                    <div class="kyc-level">
                        <i class="material-icons" style="font-size: 14px;">verified_user</i>
                        KYC Level 2
                    </div>
                </div>

                <div class="submitted-date">
                    <i class="material-icons" style="font-size: 14px;">schedule</i>
                    Submitted 5 hours ago
                </div>

                <!-- Personal Information -->
                <div class="section-divider">
                    <div class="section-title">
                        <i class="material-icons" style="font-size: 16px;">person</i>
                        Personal Information
                    </div>
                    <div class="doc-info">
                        <div class="info-item">
                            <div class="info-label">First Name</div>
                            <div class="info-value">Sarah</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Last Name</div>
                            <div class="info-value">Anderson</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Date of Birth</div>
                            <div class="info-value">Jul 22, 1985</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Nationality</div>
                            <div class="info-value">Canada</div>
                        </div>
                    </div>
                </div>

                <!-- Residential Address -->
                <div class="section-divider">
                    <div class="section-title">
                        <i class="material-icons" style="font-size: 16px;">location_on</i>
                        Residential Address
                    </div>
                    <div class="doc-info">
                        <div class="info-item full-width">
                            <div class="info-label">Full Address</div>
                            <div class="info-value">456 Maple Ave, Unit 12</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">City</div>
                            <div class="info-value">Toronto</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">State/Province</div>
                            <div class="info-value">Ontario</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Postal Code</div>
                            <div class="info-value">M5H 2N2</div>
                        </div>
                    </div>
                </div>

                <!-- ID Document Type -->
                <div class="id-type-banner">
                    <span class="id-type-banner-label">ID Document Type:</span>
                    <span class="id-type-banner-value">Passport</span>
                </div>

                <!-- ID Documents -->
                <div class="doc-section">
                    <div class="doc-label">Government ID (Front)</div>
                    <div class="doc-preview" onclick="viewDocument('id-front-2.jpg')">
                        <i class="material-icons" style="font-size: 48px; color: #6b7280;">image</i>
                    </div>
                </div>

                <div class="doc-section">
                    <div class="doc-label">Government ID (Back)</div>
                    <div class="doc-preview" onclick="viewDocument('id-back-2.jpg')">
                        <i class="material-icons" style="font-size: 48px; color: #6b7280;">image</i>
                    </div>
                </div>

                <!-- Note: Level 2 doesn't require selfie -->
                <div style="background: #eff6ff; padding: 12px; border-radius: 8px; font-size: 12px; color: #1e40af; text-align: center; margin-bottom: 16px;">
                    <i class="material-icons" style="font-size: 14px; vertical-align: middle;">info</i>
                    Level 2 verification - Selfie not required
                </div>

                <div class="kyc-actions">
                    <button class="btn-approve" onclick="approveKYC('Sarah Anderson', 'USR-10244')">
                        <i class="material-icons" style="font-size: 18px;">check_circle</i>
                        Approve
                    </button>
                    <button class="btn-reject" onclick="rejectKYC('Sarah Anderson', 'USR-10244')">
                        <i class="material-icons" style="font-size: 18px;">cancel</i>
                        Reject
                    </button>
                </div>
            </div>

            <!-- KYC Card 3 -->
            <div class="kyc-card">
                <div class="kyc-header">
                    <div class="user-info">
                        <div class="user-avatar">MB</div>
                        <div class="user-details">
                            <h4>Michael Brown</h4>
                            <p>#USR-10243 • michael@example.com</p>
                        </div>
                    </div>
                    <div class="kyc-level">
                        <i class="material-icons" style="font-size: 14px;">verified_user</i>
                        KYC Level 3
                    </div>
                </div>

                <div class="submitted-date">
                    <i class="material-icons" style="font-size: 14px;">schedule</i>
                    Submitted 1 day ago
                </div>

                <!-- Personal Information -->
                <div class="section-divider">
                    <div class="section-title">
                        <i class="material-icons" style="font-size: 16px;">person</i>
                        Personal Information
                    </div>
                    <div class="doc-info">
                        <div class="info-item">
                            <div class="info-label">First Name</div>
                            <div class="info-value">Michael</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Last Name</div>
                            <div class="info-value">Brown</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Date of Birth</div>
                            <div class="info-value">Dec 8, 1992</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Nationality</div>
                            <div class="info-value">United Kingdom</div>
                        </div>
                    </div>
                </div>

                <!-- Residential Address -->
                <div class="section-divider">
                    <div class="section-title">
                        <i class="material-icons" style="font-size: 16px;">location_on</i>
                        Residential Address
                    </div>
                    <div class="doc-info">
                        <div class="info-item full-width">
                            <div class="info-label">Full Address</div>
                            <div class="info-value">789 Oxford Street, Flat 3</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">City</div>
                            <div class="info-value">London</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">State/Province</div>
                            <div class="info-value">Greater London</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Postal Code</div>
                            <div class="info-value">W1D 1BS</div>
                        </div>
                    </div>
                </div>

                <!-- ID Document Type -->
                <div class="id-type-banner">
                    <span class="id-type-banner-label">ID Document Type:</span>
                    <span class="id-type-banner-value">National ID Card</span>
                </div>

                <!-- ID Documents -->
                <div class="doc-section">
                    <div class="doc-label">Government ID (Front)</div>
                    <div class="doc-preview" onclick="viewDocument('id-front-3.jpg')">
                        <i class="material-icons" style="font-size: 48px; color: #6b7280;">image</i>
                    </div>
                </div>

                <div class="doc-section">
                    <div class="doc-label">Government ID (Back)</div>
                    <div class="doc-preview" onclick="viewDocument('id-back-3.jpg')">
                        <i class="material-icons" style="font-size: 48px; color: #6b7280;">image</i>
                    </div>
                </div>

                <div class="doc-section">
                    <div class="doc-label">Selfie with ID</div>
                    <div class="doc-preview" onclick="viewDocument('selfie-3.jpg')">
                        <i class="material-icons" style="font-size: 48px; color: #6b7280;">portrait</i>
                    </div>
                </div>

                <div class="kyc-actions">
                    <button class="btn-approve" onclick="approveKYC('Michael Brown', 'USR-10243')">
                        <i class="material-icons" style="font-size: 18px;">check_circle</i>
                        Approve
                    </button>
                    <button class="btn-reject" onclick="rejectKYC('Michael Brown', 'USR-10243')">
                        <i class="material-icons" style="font-size: 18px;">cancel</i>
                        Reject
                    </button>
                </div>
            </div>

        </div>

    </div>
</div>
{% endblock content %}

{% block extra_scripts %}
<script>
    function approveKYC(name, userId) {
        if (confirm(`Approve KYC verification for ${name} (${userId})?\n\nThis will upgrade their account tier and unlock additional features.`)) {
            alert(`KYC approved for ${name}! User upgraded to Tier 2. Email sent. (Demo)`);
            location.reload();
        }
    }

    function rejectKYC(name, userId) {
        const reason = prompt(`Reject KYC for ${name} (${userId})?\n\nEnter rejection reason (user will be notified):`);
        if (reason) {
            alert(`KYC rejected for ${name}. Reason: "${reason}"\nUser notified via email. (Demo)`);
            location.reload();
        }
    }

    function viewDocument(doc) {
        alert(`Opening document: ${doc}\n\n(In production, this will open a lightbox with the full document image)`);
    }

    // Mobile Sidebar Toggle
    (function() {
        let overlay = document.querySelector('.sidebar-overlay');
        if (!overlay) {
            overlay = document.createElement('div');
            overlay.className = 'sidebar-overlay';
            document.body.appendChild(overlay);
        }

        const hamburger = document.querySelector('.hamburger');
        const sidebar = document.querySelector('.dlabnav');

        if (hamburger && sidebar) {
            hamburger.addEventListener('click', function(e) {
                e.stopPropagation();
                hamburger.classList.toggle('is-active');
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
                document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : '';
            });

            overlay.addEventListener('click', function() {
                hamburger.classList.remove('is-active');
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            });

            sidebar.querySelectorAll('a').forEach(function(link) {
                link.addEventListener('click', function() {
                    if (window.innerWidth < 768) {
                        setTimeout(function() {
                            hamburger.classList.remove('is-active');
                            sidebar.classList.remove('active');
                            overlay.classList.remove('active');
                            document.body.style.overflow = '';
                        }, 300);
                    }
                });
            });

            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    hamburger.classList.remove('is-active');
                    sidebar.classList.remove('active');
                    overlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        }
    })();

</script>
{% endblock extra_scripts %}